<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>邀请函2.0</title>
    <!--<meta id="viewPort" name="viewport"-->
    <!--content="width=320, initial-scale=1, maximum-scale=1, user-scalable=no" servergenerated="true"/>-->
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">

    <link rel="stylesheet" href="../res/css/yq.css"/>

    <script src="../res/js/jquery-1.11.3.min.js"></script>
    <script src="../res/plugins/swiper-3.3.1/swiper.jquery.min.js"></script>
    <script src="../res/plugins/swiper-3.3.1/swiper.animate1.0.2.min.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?type=quick&ak=C7483ab05109bc4fd92aa64babec365c&v=1.0"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/getscript?type=quick&file=api&ak=C7483ab05109bc4fd92aa64babec365c&t=20140109092002"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/getscript?type=quick&file=feature&ak=C7483ab05109bc4fd92aa64babec365c&t=20140109092002"></script>
</head>
<body>
<div id="main" class="swiper-container">
    <div class="swiper-wrapper">
        <div id="slide1" class="swiper-slide">

            <div class="host">
                <span id="host">林先生</span>
                <span style="">邀请</span>
            </div>

            <div class="qin move"  effect="fadeIn" delay="0.6s">
                <span>亲</span>
            </div>

            <div class="pic location-pic1 move"  effect="fadeInDown"  delay="1.0s">
                <img src="../res/img/user_pic_1.JPG"/>
            </div>

            <div class="time move"  effect="bounceInUp" duration="2.0s" delay="1.3s">
                <span>16年1月1号中午有空么</span>
            </div>

            <div class="room move"  effect="bounceInUp" duration="2.0s" delay="2.0s">
                <span>我订了西贝西北菜-兴泰店202雅间</span>
            </div>

            <div class="pic location-pic2 move"  effect="fadeInUp" delay="2.5s">
                <img src="../res/img/user_pic_2.JPG"/>
            </div>

            <div class="xiangyue move"  effect="fadeIn" delay="3.5s">
                <span class="move"  effect="wobble" delay="4.0s">想约</span>
            </div>
            <div class="ni move"  effect="bounceInLeft" delay="3s">
                <span class="move"  effect="rubberBand" delay="4.5s">你</span>
            </div>
            <div class="yiqizuozuo move"  effect="fadeInRight" delay="3s">
                <span class="move"  effect="bounce" delay="4.5s">一起坐坐</span>
            </div>



        </div>
        <div id="slide2" class="swiper-slide">
            <div class="yellow-square move"  effect="zoomIn" delay="0.5s">
                <span>要认准饭店地址哦</span>
            </div>
            <div id="location"  class="location move" effect="fadeIn" delay="1.2s">
                地址：<br/><span>内蒙古饭店东巷塞上府东</span>
            </div>
            <div id="map" class="map move" effect="bounceIn" duration="1.0s" delay="1.8s">

            </div>
        </div>
        <div id="slide3" class="swiper-slide">
            <div id="menu" class="swiper-container">
                <div class="swiper-wrapper">
                    <div id="menuSlide1" class="swiper-slide">
                        slide1
                    </div>
                    <div id="menuSlide2" class="swiper-slide">
                        slide2
                    </div>
                </div>
            </div>
        </div>


            <!--<div id="list-wrapper" style="height: 80%;width: 90%;position: absolute;top:10%;left: 5%;overflow:hidden">-->
                <!--<div id="list">                <span>I found a solution for this that involves nested dynamic panels. Take a look at the attached RP file.-->

<!--1. Create a dynamic panel at the width you want your actual visible content. Set this one to Never Show Scrollbars.-->
<!--2. Inside that, create a nested dynamic panel that is wider than the main dynamic panel's width. Set this one to Show Vertical Scrollbars as needed.-->
<!--3. Inside this 2nd level dynamic panel, you can put your content that will scroll. Make sure it's longer than the panel height.-->


<!--If you want this to swipe horizontally, just use the horizontal settings instead of the vertical that I used here in my example.I found a solution for this that involves nested dynamic panels. Take a look at the attached RP file.-->

<!--1. Create a dynamic panel at the width you want your actual visible content. Set this one to Never Show Scrollbars.-->
<!--2. Inside that, create a nested dynamic panel that is wider than the main dynamic panel's width. Set this one to Show Vertical Scrollbars as needed.-->
<!--3. Inside this 2nd level dynamic panel, you can put your content that will scroll. Make sure it's longer than the panel height.-->


<!--If you want this to swipe horizontally, just use the horizontal settings instead of the vertical that I used here in my example.I found a solution for this that involves nested dynamic panels. Take a look at the attached RP file.-->

<!--1. Create a dynamic panel at the width you want your actual visible content. Set this one to Never Show Scrollbars.-->
<!--2. Inside that, create a nested dynamic panel that is wider than the main dynamic panel's width. Set this one to Show Vertical Scrollbars as needed.-->
<!--3. Inside this 2nd level dynamic panel, you can put your content that will scroll. Make sure it's longer than the panel height.-->


<!--If you want this to swipe horizontally, just use the horizontal settings instead of the vertical that I used here in my example.I found a solution for this that involves nested dynamic panels. Take a look at the attached RP file.-->

<!--1. Create a dynamic panel at the width you want your actual visible content. Set this one to Never Show Scrollbars.-->
<!--2. Inside that, create a nested dynamic panel that is wider than the main dynamic panel's width. Set this one to Show Vertical Scrollbars as needed.-->
<!--3. Inside this 2nd level dynamic panel, you can put your content that will scroll. Make sure it's longer than the panel height.-->


<!--If you want this to swipe horizontally, just use the horizontal settings instead of the vertical that I used here in my example.I found a solution for this that involves nested dynamic panels. Take a look at the attached RP file.-->

<!--1. Create a dynamic panel at the width you want your actual visible content. Set this one to Never Show Scrollbars.-->
<!--2. Inside that, create a nested dynamic panel that is wider than the main dynamic panel's width. Set this one to Show Vertical Scrollbars as needed.-->
<!--3. Inside this 2nd level dynamic panel, you can put your content that will scroll. Make sure it's longer than the panel height.-->


<!--If you want this to swipe horizontally, just use the horizontal settings instead of the vertical that I used here in my example.</span>-->
                <!--</div>-->
            <!--</div>-->
        <div id="slide4" class="swiper-slide">
            <div class="diantuan move" effect="zoomIn" delay="0.2s">
                <img src="../res/img/diantuan.png">
            </div>
            <div class="jingxinshenghuo move" effect="slideInLeft" delay="1s">
                <span>品 味 电 团 精 心 生 活</span>
            </div>
            <div class="line move" effect="zoomIn" delay="1.5s">
                <img src="../res/img/horizen_line.png">
            </div>
            <div class="fangxinjue move" effect="slideInRight" delay="1s">
                <span>喝 放 心 酒 选 九 联</span>
            </div>
            <div class="bendi move" effect="fadeInDownBig" delay="1.5s">
                <span>内蒙古本地020</span>
            </div>
            <div class="weixinguanzhu move" effect="fadeInUpBig" delay="2s">
                <span>微信关注“九联”米面油酒茶，20分钟送达</span>
            </div>
            <div class="hand move" effect="rotateInDownRight" delay="3s">
                <img src="../res/img/hand.png">
            </div>
            <div class="guahaocha move" effect="flipInX" delay="3s">
                <span>动动小手，刮好茶</span>
            </div>
        </div>



    </div>
    <!-- 如果需要分页器 -->
    <div class="swiper-pagination">
        <span id="progressCustom" class="progress"></span>
        <span class="fraction"><span id="currentFraction"></span>/<span id="totalFraction"></span></span>
    </div>
    <!--向上箭头-->
    <div class="up-arrow"></div>
    <!--音乐播放-->
    <div id="music" class="music rotating">
        <audio loop="loops" src="../res/audio/bgmusic.mp3" id="bgmusic" autoplay="autoplay"></audio>
    </div>
    <!-- 如果需要导航按钮 -->
    <!--<div class="swiper-button-prev"></div>-->
    <!--<div class="swiper-button-next"></div>-->

    <!-- 如果需要滚动条 -->
    <!--<div class="swiper-scrollbar"></div>-->
</div>


<script>

    $(document).ready(function () {
        var divScorllingStrat = null;
        var offset = 0;
        var threshold_bottom = -$("#list").height()+$("#list-wrapper").height();
        var threshold_top = 0;
        var mainSwiper = new Swiper ('#main', {
            direction: 'vertical',
//            shortSwipes:false,//短滑动
            longSwipes: false,//支持长慢滑动
//            longSwipesRatio : 0.5,//支持长滑动的情况下，滑动至少百分之多少长度会触发翻页 0.5-0.1 默认0.5
            longSwipesMs : 300,//滑动操作持续多长时间算常翻页
//            touchRatio:1,//手指滑动和屏幕真是移动的比率。默认1：1  可以0.5:1 或者 -0.5:1--即反向
            // 如果需要分页器
            pagination: '.swiper-pagination',
            paginationType : 'custom',
            initialSlide :1,

            paginationCustomRender: function (swiper, current, total) {
                var scaleX = current / total,scaleY = 1;
                $("#progressCustom").transform('translate3d(0,0,0) scaleX(' + scaleX + ') scaleY(' + scaleY + ')').transition(300);
                $("#currentFraction").text(current);
                $("#totalFraction").text(total);
            },

            onInit: function(swiper){ //Swiper2.x的初始化是onFirstInit
                swiperAnimateCache(swiper); //隐藏动画元素
                swiperAnimate(swiper); //初始化完成开始动画
            },
            onSlideChangeEnd: function(swiper){
                swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
//                if(swiper.activeIndex==1){
//                    swiper.lockSwipes();
//                }
                if(swiper.activeIndex==1){
                    swiper.params.followFinger = false;
                }else{
                    swiper.params.followFinger = true;
                }
            },
            onTouchMove: function(swiper, event){
                if(swiper.activeIndex==1){
                    if($(event.target).closest("#list-wrapper").length>0){
                        $("#list").transform('translate3d(0px, ' + (offset+swiper.touches.diff) + 'px, 0px)');
                        console.log("offset:"+offset+"step:"+(swiper.touches.diff));
                    }
                }
            },
            onTouchEnd : function(swiper,event){
                if(swiper.activeIndex==1){
                    offset+=swiper.touches.diff;
                    console.log("final:"+offset);
                    if(offset>threshold_top){
                        offset=threshold_top;
                        $("#list").transform('translate3d(0px,'+offset+'px, 0px)');
                        console.log("offset>0");
                    }else if(offset<threshold_bottom){
                        offset = threshold_bottom;
                        $("#list").transform('translate3d(0px, ' + offset + 'px, 0px)');
                        console.log("height:"+offset+"offset<height");
                    }
                }
            }


        });
        var menuSwiper = new Swiper ('#menu',{
        });
        function isInScrollingDiv(target){
            return $(target).closest("#list-wrapper").length>0;
        }


        var zSwiper = function(options){
            var DEFAULTS = {
                touchRatio : 0.5,
                swiper : mySwiper
            };

        };

        //music
        var playing = false;
        $('#music').click(function(){
            if(playing=='on'){
                $(this).removeClass("rotating").children("audio").get(0).pause();
                playing = 'off';
            }else{
                $(this).addClass("rotating").children("audio").get(0).play();
                playing = 'on';
            }
        });

        //slide2 baidumap
        $("#map").height($("#map").width());
        function showMap(){
            var lont=0.0,hont=0.0;
            var noPont=false;
            lont=111.73225;
            hont=40.826618;
            var mappoint = new BMap.Point(lont, hont)
            var map = new BMap.Map("map_container");
            map.centerAndZoom(mappoint, 14);
            map.addControl(new BMap.ZoomControl());
            map.panTo(136,128);
            if(!noPont){
                var marker = new BMap.Marker(mappoint);// 创建标注
                map.addOverlay(marker);
                var infoWindow1 = new BMap.InfoWindow("&#28180;&#27665;&#26032;&#26449;&#23637;&#19996;&#36335;");
                marker.addEventListener("click", function(){this.openInfoWindow(infoWindow1);});
            }
        }
//        showMap();







//        $("#content").on('touchmove',function(e){
//            alert("sdf");
//        })
    })

</script>
</body>
</html>
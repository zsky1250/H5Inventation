<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>邀请函2.0</title>
    <!--<meta id="viewPort" name="viewport"-->
    <!--content="width=320, initial-scale=1, maximum-scale=1, user-scalable=no" servergenerated="true"/>-->
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">

    <link rel="stylesheet" href="../res/css/yq.css"/>

    <script src="../res/js/jquery-1.11.3.min.js"></script>
    <script src="../res/plugins/swiper-3.3.1/swiper.jquery.min.js"></script>
    <script src="../res/plugins/swiper-3.3.1/swiper.animate1.0.2.min.js"></script>
</head>
<body>
<div class="swiper-container">
    <div class="swiper-wrapper">
        <div id="slide1" class="swiper-slide">

            <div class="host">
                <span id="host">林先生</span>
                <span style="">邀请</span>
            </div>

            <div class="qin move"  effect="fadeIn" delay="0.6s">
                <span>亲</span>
            </div>

            <div class="pic location1 move"  effect="fadeInDown"  delay="1.0s">
                <img src="../res/img/user_pic_1.JPG"/>
            </div>

            <div class="time move"  effect="bounceInUp" duration="2.0s" delay="1.3s">
                <span>16年1月1号中午有空么</span>
            </div>

            <div class="room move"  effect="bounceInUp" duration="2.0s" delay="2.0s">
                <span>我订了西贝西北菜-兴泰店202雅间</span>
            </div>

            <div class="pic location2 move"  effect="fadeInUp" delay="2.5s">
                <img src="../res/img/user_pic_2.JPG"/>
            </div>

            <div class="xiangyue move"  effect="fadeIn" delay="3.5s">
                <span class="move"  effect="wobble" delay="4.0s">想约</span>
            </div>
            <div class="ni move"  effect="bounceInLeft" delay="3s">
                <span class="move"  effect="rubberBand" delay="4.5s">你</span>
            </div>
            <div class="yiqizuozuo move"  effect="fadeInRight" delay="3s">
                <span class="move"  effect="bounce" delay="4.5s">一起坐坐</span>
            </div>



        </div>
        <div id="slide2" class="swiper-slide" style="background: cadetblue">
            <div id="list-wrapper" style="height: 80%;width: 90%;position: absolute;top:10%;left: 5%;overflow:hidden">
                <div id="list">                <span>I found a solution for this that involves nested dynamic panels. Take a look at the attached RP file.

1. Create a dynamic panel at the width you want your actual visible content. Set this one to Never Show Scrollbars.
2. Inside that, create a nested dynamic panel that is wider than the main dynamic panel's width. Set this one to Show Vertical Scrollbars as needed.
3. Inside this 2nd level dynamic panel, you can put your content that will scroll. Make sure it's longer than the panel height.


If you want this to swipe horizontally, just use the horizontal settings instead of the vertical that I used here in my example.I found a solution for this that involves nested dynamic panels. Take a look at the attached RP file.

1. Create a dynamic panel at the width you want your actual visible content. Set this one to Never Show Scrollbars.
2. Inside that, create a nested dynamic panel that is wider than the main dynamic panel's width. Set this one to Show Vertical Scrollbars as needed.
3. Inside this 2nd level dynamic panel, you can put your content that will scroll. Make sure it's longer than the panel height.


If you want this to swipe horizontally, just use the horizontal settings instead of the vertical that I used here in my example.I found a solution for this that involves nested dynamic panels. Take a look at the attached RP file.

1. Create a dynamic panel at the width you want your actual visible content. Set this one to Never Show Scrollbars.
2. Inside that, create a nested dynamic panel that is wider than the main dynamic panel's width. Set this one to Show Vertical Scrollbars as needed.
3. Inside this 2nd level dynamic panel, you can put your content that will scroll. Make sure it's longer than the panel height.


If you want this to swipe horizontally, just use the horizontal settings instead of the vertical that I used here in my example.I found a solution for this that involves nested dynamic panels. Take a look at the attached RP file.

1. Create a dynamic panel at the width you want your actual visible content. Set this one to Never Show Scrollbars.
2. Inside that, create a nested dynamic panel that is wider than the main dynamic panel's width. Set this one to Show Vertical Scrollbars as needed.
3. Inside this 2nd level dynamic panel, you can put your content that will scroll. Make sure it's longer than the panel height.


If you want this to swipe horizontally, just use the horizontal settings instead of the vertical that I used here in my example.I found a solution for this that involves nested dynamic panels. Take a look at the attached RP file.

1. Create a dynamic panel at the width you want your actual visible content. Set this one to Never Show Scrollbars.
2. Inside that, create a nested dynamic panel that is wider than the main dynamic panel's width. Set this one to Show Vertical Scrollbars as needed.
3. Inside this 2nd level dynamic panel, you can put your content that will scroll. Make sure it's longer than the panel height.


If you want this to swipe horizontally, just use the horizontal settings instead of the vertical that I used here in my example.</span>
                </div>
            </div>
        </div>


        <div class="swiper-slide">Slide 3</div>
    </div>
    <!-- 如果需要分页器 -->
    <div class="swiper-pagination">
        <span id="progressCustom" class="progress"></span>
        <span class="fraction"><span id="currentFraction"></span>/<span id="totalFraction"></span></span>
    </div>
    <!--向上箭头-->
    <div class="up-arrow"></div>

    <!-- 如果需要导航按钮 -->
    <!--<div class="swiper-button-prev"></div>-->
    <!--<div class="swiper-button-next"></div>-->

    <!-- 如果需要滚动条 -->
    <!--<div class="swiper-scrollbar"></div>-->
</div>


<script>

    $(document).ready(function () {
        var divScorllingStrat = null;
        var offset = 0;
        var threshold_bottom = -$("#list").height()+$("#list-wrapper").height();
        var threshold_top = 0;
        var mySwiper = new Swiper ('.swiper-container', {
            direction: 'vertical',
//            shortSwipes:false,//短滑动
            longSwipes: false,//支持长慢滑动
            longSwipesRatio : -0.5,//支持长滑动的情况下，滑动至少百分之多少长度会触发翻页 0.5-0.1 默认0.5
            longSwipesMs : 300,//滑动操作持续多长时间算常翻页
            touchRatio:1,
            // 如果需要分页器
            pagination: '.swiper-pagination',
            paginationType : 'custom',

            // 如果需要前进后退按钮
//            nextButton: '.swiper-button-next',
//            prevButton: '.swiper-button-prev',

            // 如果需要滚动条
//            scrollbar: '.swiper-scrollbar',
            paginationCustomRender: function (swiper, current, total) {
                var scaleX = current / total,scaleY = 1;
                $("#progressCustom").transform('translate3d(0,0,0) scaleX(' + scaleX + ') scaleY(' + scaleY + ')').transition(300);
                $("#currentFraction").text(current);
                $("#totalFraction").text(total);
            },

            onInit: function(swiper){ //Swiper2.x的初始化是onFirstInit
                swiperAnimateCache(swiper); //隐藏动画元素
                swiperAnimate(swiper); //初始化完成开始动画
            },
            onSlideChangeEnd: function(swiper){
                swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
//                if(swiper.activeIndex==1){
//                    swiper.lockSwipes();
//                }
                if(swiper.activeIndex==1){
                    swiper.params.touchRatio = 0.001;
                }else{
                    swiper.params.touchRatio = 1;
                }
            },
            onTouchMove: function(swiper, event){
                if(swiper.activeIndex==1){
                    if($(event.target).closest("#list-wrapper").length>0){
                        $("#list").transform('translate3d(0px, ' + (offset+swiper.touches.diff) + 'px, 0px)');
                        console.log("offset:"+offset+"step:"+(swiper.touches.diff));
                    }
                }
            },
            onTouchEnd : function(swiper,event){
                if(swiper.activeIndex==1){
                    offset+=swiper.touches.diff;
                    console.log("final:"+offset);

                    if(offset>threshold_top){
                        offset=threshold_top;
                        $("#list").transform('translate3d(0px,'+offset+'px, 0px)');
                        console.log("offset>0");
                    }else if(offset<threshold_bottom){
                        offset = threshold_bottom;
                        $("#list").transform('translate3d(0px, ' + offset + 'px, 0px)');
                        console.log("height:"+offset+"offset<height");
                    }
                }
            }


        });

        function isInScrollingDiv(target){
            return $(target).closest("#list-wrapper").length>0;
        }


        var zSwiper = function(options){
            var DEFAULTS = {
                touchRatio : 0.5,
                swiper : mySwiper
            };

//            this.stopTouchRatio(){
//                this.swiper.param.touchRatio = 0;
//            };
//
//            this.recoveryTouchRatio(){
//                this.swiper.params.touchRatio = DEFAULTS.touchRatio;
//            };
        }






//        $("#content").on('touchmove',function(e){
//            alert("sdf");
//        })
    })

</script>
</body>
</html>